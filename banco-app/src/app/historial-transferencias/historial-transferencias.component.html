<div class="header">
  <div class="user-profile">
    <i class="fas fa-user"></i>
  </div>
  <div class="titulo">
    <h2>Historial</h2>
  </div>
</div>

<div class="content">
  <div class="sidebar">
    <div class="logo">
      <img src="assets/logo3.1.png" alt="icon">
    </div>
    <button (click)="redirectTo('cambio-contraseña')"><i class="fas fa-key"></i> Cambio Contraseña</button>
    <button (click)="redirectTo('visualizacion-saldo')"><i class="fas fa-eye"></i> Visualización de saldo</button>
    <button (click)="redirectTo('crear-cuenta')"><i class="fas fa-plus"></i> Agregar Cuenta</button>
    <button (click)="redirectTo('transferencia')"><i class="fas fa-exchange-alt"></i> Transferencia</button>
    <button (click)="redirectTo('seleccion-servicio')"><i class="fas fa-money-bill-wave"></i> Pagar Servicios</button>
    <button (click)="redirectTo('/')"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</button>
  </div>
  <div class="container">
    <div class="filters-container">
      <label>Filtrar por Tipo:</label>
      <select [(ngModel)]="filtroTipo" (change)="filtrarPorTipo(filtroTipo)">
        <option value="todos">Todos</option>
        <option value="ingreso">Ingresos</option>
        <option value="egreso">Egresos</option>
      </select>
      <label>Seleccionar Rango de Fechas:</label>
      <input type="date" [(ngModel)]="fechaInicio" (ngModelChange)="filtrarPorFechas()">
      <input type="date" [(ngModel)]="fechaFin" (ngModelChange)="filtrarPorFechas()">
      
      <div class="button-group">
      <button *ngIf="fechaInicio || fechaFin" (click)="filtrarPorFechas()" class="boton">Aplicar Filtro</button>
      <button *ngIf="fechaInicio || fechaFin" (click)="fechaInicio = fechaFin = ''; filtrarPorFechas()" class="boton">Quitar Filtro</button>
    </div>
    </div>
    <div *ngIf="transferenciasFiltradas.length === 0">
      <p>No hay transferencias para mostrar.</p>
    </div>
    <ul>
      <li *ngFor="let transferencia of transferenciasFiltradas" [ngClass]="{'ingreso': transferencia.tipo === 'ingreso', 'egreso': transferencia.tipo === 'egreso'}">
        <div>
          <p>Fecha: {{ transferencia.fecha | date }}</p>
          <p>Monto: {{ transferencia.monto | currency }}</p>
          
          <!-- Mostrar número de cuenta solo para pagos de servicios -->
          <p *ngIf="transferencia.descripcion.includes('Pago de servicio')">Cuenta: {{ transferencia.numeroCuenta }}</p>

          <!-- Mostrar tanto la cuenta como el destino para transferencias regulares -->
          <p *ngIf="!transferencia.descripcion.includes('Pago de servicio')">Cuenta origen: {{ transferencia.numeroCuenta }}</p>
          <p *ngIf="!transferencia.descripcion.includes('Pago de servicio')">Cuenta destino: {{ transferencia.cuentaDestino }}</p>

          <p>Descripción: {{ transferencia.descripcion }}</p>
        </div>
      </li>
    </ul>
  </div>
</div>
